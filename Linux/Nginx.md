# 第一节：Nginx

### 代理

#### 正向代理

正向代理是一个位于客户端和目标服务器之间的代理服务器(中间服务器)，为了从原始服务器取得内容，客户端向代理服务器发送一个请求，并且指定目标服务器，之后代理向目标服务器转交并且将获得的内容返回给客户端；需要你主动设置代理服务器ip或者域名进行访问，由设置的服务器ip或者域名去目标服务器获取访问内容并返回。

用途：翻墙

chang'yong

#### 反向代理

客户端向反向代理发送请求，接着反向代理判断请求走向何处，并将请求转交给客户端；对于客户端来说，反向代理就好像目标服务器，不需要你做任何设置，直接访问服务器真实ip或者域名，但是服务器内部会自动根据访问内容进行跳转及内容返回，你不知道它最终访问的是哪些机器。

用途：

- 保护和隐藏原始资源服务器
- 加密和SSL加速
- 负载均衡
- 缓存静态内容
- 安全



### 终端命令

#### 使用&后台运行程序

- 结果会输出到终端
- 使用Ctrl + C发送SIGINTI信号，程序免疫
- 关闭session（关闭终端）发送SIGHUP信号，程序关闭

#### 使用nohup运行程序

- 结果默认会输出到nohup.out
- 使用Ctrl + C发送SIGINT信号，程序关闭
- 关闭session发送SIGHUP信号，程序免疫
  平时可以使用nohup与&启动程序，同时免疫SIGINT与SIGHUP信号，开启守护进程



### nginx.conf

- rewrite重定向url（可以美化URL）
- location优先级：(location =) > (location 完整路径) > (location ^~ 路径) > (location ~,~* 正则顺序，如果有两个相同正则，会直接按第一个正则为准，不会被下边的覆盖) > (location 部分起始路径) > (/)
- 如果直接访问ip:port（对应多个HOST），会访问第一个匹配的（引入文件顺序，文件内server配置顺序）；
  如果直接访问host（对应多个port）,会访问第一个匹配的（引入文件顺序，文件内server配置顺序）